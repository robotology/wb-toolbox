
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A Simulink Toolbox for Whole-Body Control">
      
      
        <meta name="author" content="Diego Ferigo">
      
      
        <link rel="canonical" href="https://robotology.github.io/wb-toolbox/Migration_from_WB-Toolbox_2.0/">
      
      
        <link rel="prev" href="../Migration_from_WBI-Toolbox_1.0/">
      
      
        <link rel="next" href="../about/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>From WB-Toolbox 2.0 - WBT</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#from-wb-toolbox-20-to-wb-toolbox-3" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="WBT" class="md-header__button md-logo" aria-label="WBT" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M234.5 5.7c13.9-5 29.1-5 43.1 0l192 68.6c25.4 9.1 42.4 33.2 42.4 60.3v242.9c0 27-17 51.2-42.5 60.3l-192 68.6c-13.9 5-29.1 5-43.1 0l-192-68.6C17 428.6 0 404.5 0 377.4V134.6c0-27 17-51.2 42.5-60.3zM256 66 82.3 128 256 190l173.7-62zm32 368.6 160-57.1v-188l-160 57.1z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            WBT
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              From WB-Toolbox 2.0
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/robotology/wb-toolbox" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    robotology/wb-toolbox
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="WBT" class="md-nav__button md-logo" aria-label="WBT" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M234.5 5.7c13.9-5 29.1-5 43.1 0l192 68.6c25.4 9.1 42.4 33.2 42.4 60.3v242.9c0 27-17 51.2-42.5 60.3l-192 68.6c-13.9 5-29.1 5-43.1 0l-192-68.6C17 428.6 0 404.5 0 377.4V134.6c0-27 17-51.2 42.5-60.3zM256 66 82.3 128 256 190l173.7-62zm32 368.6 160-57.1v-188l-160 57.1z"/></svg>

    </a>
    WBT
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/robotology/wb-toolbox" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    robotology/wb-toolbox
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Install
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Troubleshooting
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://robotology.github.io/wb-toolbox/doxygen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Documentation [master]
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://robotology.github.io/wb-toolbox/devel/doxygen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Documentation [devel]
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Tutorials
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../simulink_basic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Basic real-time Simulink simulation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../simulink_model_blocks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using model blocks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../simulink_gazebo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Simulink and Gazebo
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" checked>
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Migration
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Migration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Migration_from_WBI-Toolbox_1.0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    From WBI-Toolbox
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    From WB-Toolbox 2.0
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    From WB-Toolbox 2.0
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#new-toolbox-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      New toolbox configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="New toolbox configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#store-the-configuration-in-the-simulink-model" class="md-nav__link">
    <span class="md-ellipsis">
      Store the configuration in the Simulink model
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#load-the-configuration-from-the-workspace" class="md-nav__link">
    <span class="md-ellipsis">
      Load the configuration from the Workspace
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multi-robot-support" class="md-nav__link">
    <span class="md-ellipsis">
      Multi-robot support
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other-manual-edits" class="md-nav__link">
    <span class="md-ellipsis">
      Other manual edits
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deprecations" class="md-nav__link">
    <span class="md-ellipsis">
      Deprecations
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../about/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    About
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../license/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    License
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#new-toolbox-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      New toolbox configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="New toolbox configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#store-the-configuration-in-the-simulink-model" class="md-nav__link">
    <span class="md-ellipsis">
      Store the configuration in the Simulink model
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#load-the-configuration-from-the-workspace" class="md-nav__link">
    <span class="md-ellipsis">
      Load the configuration from the Workspace
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multi-robot-support" class="md-nav__link">
    <span class="md-ellipsis">
      Multi-robot support
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other-manual-edits" class="md-nav__link">
    <span class="md-ellipsis">
      Other manual edits
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deprecations" class="md-nav__link">
    <span class="md-ellipsis">
      Deprecations
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="from-wb-toolbox-20-to-wb-toolbox-3">From WB-Toolbox 2.0 to WB-Toolbox 3.*<a class="headerlink" href="#from-wb-toolbox-20-to-wb-toolbox-3" title="Permanent link">&para;</a></h1>
<p>Most of the major changes delivered with the <code>3.0</code> version of the <code>WB-Toolbox</code> don't affect directly the end-user. Under the hood the toolbox had an important polishing, and the small manual intervention required by this new release match the new features which have been developed.</p>
<p>You can read <a href="https://github.com/robotology/WB-Toolbox/issues/65">Release Notes</a> for a detailed overview. Below are described only the steps required to port Simulink models to this new release.</p>
<h2 id="new-toolbox-configuration">New toolbox configuration<a class="headerlink" href="#new-toolbox-configuration" title="Permanent link">&para;</a></h2>
<p>The <code>WB-Toolbox 2.0</code> was based on top of <a href="https://github.com/robotology/yarp-wholebodyinterface"><code>yarpWholeBodyInterface</code></a>, which configuration was stored in a <code>yarpWholeBodyInterface.ini</code> file. This file was retrieved by <code>ResourceFinder</code> and its information was then loaded into the toolbox.</p>
<h3 id="store-the-configuration-in-the-simulink-model">Store the configuration in the Simulink model<a class="headerlink" href="#store-the-configuration-in-the-simulink-model" title="Permanent link">&para;</a></h3>
<p><code>WB-Toolbox 3.0</code> deprecated the support of <code>yarpWholeBodyInterface</code>, and for reducing the complexity and sparsity of the information storage it allows configuring a Simulink model from the model itself.</p>
<p>The new <em>Configuration</em> block allows inserting information such as <strong>Robot Name</strong>, <strong>URDF Name</strong>, <strong>Controlled Joints</strong>, ... directly from the block's mask.</p>
<h3 id="load-the-configuration-from-the-workspace">Load the configuration from the Workspace<a class="headerlink" href="#load-the-configuration-from-the-workspace" title="Permanent link">&para;</a></h3>
<p>Sometimes it might be useful loading the model's configuration directly from the Workspace. For this purpose, a new <code>WBToolbox.WBToolboxConfig</code> class has been developed. The <em>Configuration</em> block needs to know only the name of the variable which refers to the object. Its data is then read before the simulation runs.</p>
<p>This snippet of code shows an example of how to initialize a configuration object:</p>
<div class="highlight"><pre><span></span><code>#<span class="w"> </span><span class="n">Initialize</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="n">object</span>
<span class="n">WBTConfigRobot</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">WBToolbox</span><span class="p">.</span><span class="n">WBToolboxConfig</span><span class="p">;</span>

#<span class="w"> </span><span class="n">Insert</span><span class="w"> </span><span class="n">robot</span><span class="w"> </span><span class="n">data</span>
<span class="n">WBTConfigRobot</span><span class="p">.</span><span class="n">RobotName</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;icubSim&#39;</span><span class="p">;</span>
<span class="n">WBTConfigRobot</span><span class="p">.</span><span class="n">UrdfFile</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;model.urdf&#39;</span><span class="p">;</span>
<span class="n">WBTConfigRobot</span><span class="p">.</span><span class="n">ControlledJoints</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">{</span><span class="k">...</span>
<span class="w">    </span><span class="s">&#39;torso_pitch&#39;</span><span class="p">,</span><span class="s">&#39;torso_roll&#39;</span><span class="p">,</span><span class="s">&#39;torso_yaw&#39;</span><span class="p">,</span><span class="k">...</span>
<span class="w">    </span><span class="s">&#39;r_shoulder_pitch&#39;</span><span class="p">,</span><span class="s">&#39;r_shoulder_roll&#39;</span><span class="p">,</span><span class="s">&#39;r_shoulder_yaw&#39;</span><span class="p">,</span><span class="s">&#39;r_elbow&#39;</span><span class="p">,</span><span class="k">...</span>
<span class="w">    </span><span class="s">&#39;l_shoulder_pitch&#39;</span><span class="p">,</span><span class="s">&#39;l_shoulder_roll&#39;</span><span class="p">,</span><span class="s">&#39;l_shoulder_yaw&#39;</span><span class="p">,</span><span class="s">&#39;l_elbow&#39;</span><span class="p">};</span>
<span class="n">WBTConfigRobot</span><span class="p">.</span><span class="n">ControlBoardsNames</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">{</span><span class="s">&#39;torso&#39;</span><span class="p">,</span><span class="s">&#39;left_arm&#39;</span><span class="p">,</span><span class="s">&#39;right_arm&#39;</span><span class="p">};</span>
<span class="n">WBTConfigRobot</span><span class="p">.</span><span class="n">LocalName</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;WBT&#39;</span><span class="p">;</span>
</code></pre></div>
<p>To check if the data has been read correctly, it is displayed as read-only in the block's mask.</p>
<p>Furthermore, a good sign for a valid configuration is the <code>WBTConfigRobot.ValidConfiguration</code> property.</p>
<h3 id="multi-robot-support">Multi-robot support<a class="headerlink" href="#multi-robot-support" title="Permanent link">&para;</a></h3>
<p>The scope of the introduction of the <em>Configuration</em> block goes beyond the need of a simpler toolbox configuration. One of the biggest limitation of the <code>2.0</code> version is the support of <a href="https://github.com/robotology/WB-Toolbox/issues/37">controlling only one robot per model</a>.</p>
<p><code>WB-Toolbox 3.0</code> is now capable of reading / sending data from / to multiple robots. Multiple <em>Configuration</em> blocks can be present in the same model attaining to the following rules:</p>
<ul>
<li>In the same hierarchical level of a Simulink model, only one <em>Configuration</em>
 block should be present. In other words, you should never see in the display more than one <em>Configuration</em> block.</li>
<li><em>Configuration</em> blocks put deeper in the hierarchy (e.g. in a Subsystem) override the previous ones.</li>
</ul>
<p>There are a few pitfalls which are worth to be highlighted:</p>
<ul>
<li>It is legit having two Subsystems with different <em>Configuration</em> blocks which point to the same robot. They can have for instance a different joint list and use different control boards. Although, despite reading information never creates problems, sending data to the robot in such scenario can be disastrous. In fact, consider the case these two subsystems share one link, and configure it in two different control modes (e.g. Position and Torque). Sending references to this link causes unpredictable effects.</li>
<li>In line of theory it would be possible to have two subsystems in which the first one refers to a Gazebo model and the second one to a real robot. However, this case causes unpredictable behaviour for what concerns the synchronization. In fact, two different blocks for such aim are present in the toolbox: <em>Simulator Synchronizer</em> and <em>Real Time Syncronizer</em>. They should be always used exclusively.</li>
</ul>
<h2 id="other-manual-edits">Other manual edits<a class="headerlink" href="#other-manual-edits" title="Permanent link">&para;</a></h2>
<ul>
<li>All the <em>Get Estimate</em> blocks need to be replaced by the new <em>Get Measurement</em> block.</li>
<li>All the hardcoded digital filters (e.g. for the joints velocities) have been removed. A new <code>Discrete Filter</code> block has been developed, and it should be manually added if the read raw signal (e.g. from the <em>Get Measurement</em> block) requires filtering.</li>
<li>The <code>C++</code> class used by the <em>DoFs Converter</em> changed. All the blocks in the <code>YARP To WBI</code> configuration need to be connected again.</li>
<li>The gravity vector is stored is the <code>WBToolboxConfig</code> class. If an alternative value is needed, set it globally directly in the configuration object or scope the block which needs it in a Subsystem with its own <em>Configuration</em> block.</li>
<li>In order to set the low level PIDs, loading in the Workspace a <code>WBToolbox.WBTPIDConfig</code> object should be configured as follows:</li>
</ul>
<div class="highlight"><pre><span></span><code>#<span class="w"> </span><span class="n">Initialize</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="nb">empty</span><span class="w"> </span><span class="n">object</span>
<span class="n">pids</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">WBToolbox</span><span class="p">.</span><span class="n">WBTPIDConfig</span><span class="p">;</span>

#<span class="w"> </span><span class="n">Insert</span><span class="w"> </span><span class="n">data</span>
<span class="n">pids</span><span class="p">.</span><span class="n">addPID</span><span class="p">(</span><span class="n">WBToolbox</span><span class="p">.</span><span class="n">PID</span><span class="p">(</span><span class="s">&#39;l_elbow&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">WBToolbox</span><span class="p">.</span><span class="n">PID</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)));</span>
<span class="n">pids</span><span class="p">.</span><span class="n">addPID</span><span class="p">(</span><span class="n">WBToolbox</span><span class="p">.</span><span class="n">PID</span><span class="p">(</span><span class="s">&#39;l_wrist_pitch&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">WBToolbox</span><span class="p">.</span><span class="n">PID</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">)));</span>
<span class="n">pids</span><span class="p">.</span><span class="n">addPID</span><span class="p">(</span><span class="n">WBToolbox</span><span class="p">.</span><span class="n">PID</span><span class="p">(</span><span class="s">&#39;r_shoulder_pitch&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">WBToolbox</span><span class="p">.</span><span class="n">PID</span><span class="p">(</span><span class="mf">0.2</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)));</span>
<span class="n">pids</span><span class="p">.</span><span class="n">addPID</span><span class="p">(</span><span class="n">WBToolbox</span><span class="p">.</span><span class="n">PID</span><span class="p">(</span><span class="s">&#39;torso_roll&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">WBToolbox</span><span class="p">.</span><span class="n">PID</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)));</span>
</code></pre></div>
<p>If some of the controlled joints are not specified, the PIDs are kept in their default values.</p>
<h2 id="deprecations">Deprecations<a class="headerlink" href="#deprecations" title="Permanent link">&para;</a></h2>
<ul>
<li><em>Inverse Kinematics</em> and <em>Remote Inverse Kinematics</em> have been temporary deprecated. They will see a major release in the coming months. If you need them please do not upgrade to the <code>3.0</code> version.</li>
<li><em>Set Low Level PID</em> block lost the capability of switching between multiple configurations. Since they were stored in an external file, this change is aligned to the simplification process chosen for for the configuration.</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2020 Istituto Italiano di Tecnologia
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>